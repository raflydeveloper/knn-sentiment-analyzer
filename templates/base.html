<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title|default('Analisis Sentimen') }}</title>

    <link rel="icon" href="https://images.squarespace-cdn.com/content/v1/56259792e4b0040b0962c37a/b531c2c1-92aa-4cd3-9e62-c3f5dd6f8943/vaccine.png" type="image/x-icon">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  </head>
  
  <body class="d-flex flex-column min-vh-100">

    <div id="loading-overlay">
        <video autoplay loop muted playsinline width="250">
            <source src="{{ url_for('static', filename='videos/loading.webm') }}" type="video/webm">
            Browser Anda tidak mendukung video tag.
        </video>
        <p class="mt-3 fs-5 text-secondary">Sedang memproses, mohon tunggu...</p>
    </div>

    {% include 'navbar.html' %}
    
    <main class="flex-grow-1">
        <br/>
        <div class="container">
            {# Menampilkan flash messages (notifikasi) #}
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category if category != 'message' else 'info' }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            {# Blok ini akan diisi oleh konten dari halaman lain (index.html, klasifikasi.html, dll) #}
            {% block content %}
            {% endblock %}
        </div>
    </main>
    
    <footer class="w3-container w3-teal w3-center" style="margin-top: 40px;">
        <p style="padding-top: 8px;">Copyright &copy; 2025 Muhammad Rafly Ardhiansyah</p>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const loader = document.getElementById('loading-overlay');
            
            // Pemicu untuk semua form yang memiliki kelas 'needs-loader'
            const forms = document.querySelectorAll('.needs-loader');
            forms.forEach(form => {
                form.addEventListener('submit', function () {
                    // Cek validasi form dasar dari browser sebelum menampilkan loader
                    if (form.checkValidity()) {
                        loader.style.display = 'flex';
                    }
                });
            });

            // Pemicu untuk semua link yang memiliki kelas 'needs-loader-link'
            const links = document.querySelectorAll('.needs-loader-link');
            links.forEach(link => {
                link.addEventListener('click', function () {
                    loader.style.display = 'flex';
                });
            });
        });
    </script>

  </body>
</html>